<!DOCTYPE html>
<html>
<head>
    <title>Energy Dashboard Cards Test</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .card { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .status { margin: 5px 0; font-weight: bold; }
        .status.success { color: green; }
        .status.error { color: red; }
        h2 { color: #03a9f4; }
    </style>
</head>
<body>
    <h1>Energy Dashboard Cards Test</h1>
    
    <div class="card">
        <h2>Status</h2>
        <div id="loading-status">Loading cards...</div>
        
        <h3>Entity Card</h3>
        <div id="entity-card-status" class="status">Checking...</div>
        
        <h3>Chart Card</h3>
        <div id="chart-card-status" class="status">Checking...</div>
    </div>
    
    <script>
        // Force window.customElements to exist
        window.customElements = window.customElements || { 
            define: () => console.warn('Custom elements not supported'), 
            get: () => undefined 
        };
        
        // Initialize empty customCards array
        window.customCards = [];
        
        // Load the main script
        const script = document.createElement('script');
        script.src = './energy-dashboard-cards.js';
        script.type = 'module';
        document.head.appendChild(script);
        
        // Check status after 3 seconds
        setTimeout(() => {
            const loadingStatus = document.getElementById('loading-status');
            const entityStatus = document.getElementById('entity-card-status');
            const chartStatus = document.getElementById('chart-card-status');
            
            loadingStatus.textContent = 'Cards loaded, checking registration...';
            
            // Check entity card
            if (customElements.get('energy-dashboard-entity-card')) {
                entityStatus.textContent = 'Registered successfully';
                entityStatus.className = 'status success';
            } else {
                entityStatus.textContent = 'Failed to register';
                entityStatus.className = 'status error';
            }
            
            // Check chart card
            if (customElements.get('energy-dashboard-chart-card')) {
                chartStatus.textContent = 'Registered successfully';
                chartStatus.className = 'status success';
            } else {
                chartStatus.textContent = 'Failed to register';
                chartStatus.className = 'status error';
            }
            
            // Final status
            if (customElements.get('energy-dashboard-entity-card') && 
                customElements.get('energy-dashboard-chart-card')) {
                loadingStatus.textContent = 'All cards loaded successfully!';
                loadingStatus.style.color = 'green';
            } else {
                loadingStatus.textContent = 'Some cards failed to load. Check the console for errors.';
                loadingStatus.style.color = 'red';
            }
            
            // Show registered cards
            console.log('Registered custom cards:', window.customCards);
        }, 3000);
    </script>
</body>
</html>
