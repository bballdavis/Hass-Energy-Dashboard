<!DOCTYPE html>
<html>
<head>
  <title>Energy Dashboard Cards Debug</title>
  <script type="module" src="./energy-dashboard-cards.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .card { margin: 20px 0; border: 1px solid #ccc; padding: 10px; }
    h1, h2 { color: #03a9f4; }
    .status { margin: 10px 0; font-weight: bold; }
    .status.success { color: green; }
    .status.error { color: red; }
    .log { background: #f5f5f5; padding: 10px; border: 1px solid #ddd; height: 200px; overflow: auto; }
  </style>
</head>
<body>
  <h1>Energy Dashboard Cards Debug</h1>
  
  <div class="card">
    <h2>Entity Card Status</h2>
    <div id="entity-card-status" class="status">Checking...</div>
  </div>
  
  <div class="card">
    <h2>Chart Card Status</h2>
    <div id="chart-card-status" class="status">Checking...</div>
  </div>
  
  <div class="card">
    <h2>Console Log</h2>
    <div id="console-log" class="log"></div>
  </div>

  <script>
    // Override console methods to display in our log div
    const logDiv = document.getElementById('console-log');
    const originalConsole = { 
      log: console.log, 
      error: console.error, 
      warn: console.warn,
      info: console.info
    };
    
    ['log', 'error', 'warn', 'info'].forEach(method => {
      console[method] = function(...args) {
        originalConsole[method].apply(console, args);
        const msg = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : arg).join(' ');
        const div = document.createElement('div');
        div.textContent = `[${method}] ${msg}`;
        if (method === 'error') div.style.color = 'red';
        if (method === 'warn') div.style.color = 'orange';
        logDiv.appendChild(div);
        logDiv.scrollTop = logDiv.scrollHeight;
      };
    });

    // Check status of components after a delay
    setTimeout(() => {
      const entityCardStatus = document.getElementById('entity-card-status');
      const chartCardStatus = document.getElementById('chart-card-status');
      
      if (customElements.get('energy-dashboard-entity-card')) {
        entityCardStatus.textContent = 'Registered successfully';
        entityCardStatus.className = 'status success';
      } else {
        entityCardStatus.textContent = 'Failed to register';
        entityCardStatus.className = 'status error';
      }
      
      if (customElements.get('energy-dashboard-chart-card')) {
        chartCardStatus.textContent = 'Registered successfully';
        chartCardStatus.className = 'status success';
      } else {
        chartCardStatus.textContent = 'Failed to register';
        chartCardStatus.className = 'status error';
      }
    }, 2000);
  </script>
</body>
</html>
